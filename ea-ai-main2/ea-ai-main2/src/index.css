@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@400&display=swap');
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme {
  --default-transition: all 0.2s ease;
  --chat-position-transition: all 0.5s ease-in-out;
  --default-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --greeting-font-family: 'Lora', serif;
  
  /* UX-Driven Typography System - Attention Flow Based */
  /* PRIMARY ATTENTION ZONE - Active interaction areas (chat input, main actions) */
  --font-primary-size: 14px;
  --font-primary-weight: 500;
  --font-primary-line-height: 1.5;
  
  /* SECONDARY ATTENTION ZONE - Navigation and important controls */
  --font-secondary-size: 13px;
  --font-secondary-weight: 475;
  --font-secondary-line-height: 1.45;
  
  /* TERTIARY ATTENTION ZONE - Background content, scannable lists */
  --font-tertiary-size: 12px;
  --font-tertiary-weight: 400;
  --font-tertiary-line-height: 1.4;
  
  /* UTILITY ATTENTION ZONE - Minimal UI elements, three dots, meta info */
  --font-utility-size: 11px;
  --font-utility-weight: 350;
  --font-utility-line-height: 1.35;
  
  /* LEGACY SCALE - Maintained for headings and special use */
  --font-size-lg: 18px;       /* Section headings */
  --line-height-lg: 1.4;
  --font-weight-lg: 600;
  
  --font-size-xl: 20px;       /* Page headings */
  --line-height-xl: 1.3;
  --font-weight-xl: 600;
  
  --font-size-2xl: 24px;      /* Large headings */
  --line-height-2xl: 1.2;
  --font-weight-2xl: 600;
  
  --font-size-3xl: 30px;      /* Hero text */
  --line-height-3xl: 1.2;
  --font-weight-3xl: 600;

  /* Border Radius Design System - Professional Curvature */
  --radius-sm: 0.375rem;     /* 6px - small elements like badges */
  --radius-md: 0.5rem;       /* 8px - default buttons and inputs */  
  --radius-lg: 0.75rem;      /* 12px - large containers like chat input */
  --radius-xl: 1rem;         /* 16px - special cases like modals */
  
  /* UX-Driven Spacing System - Attention Priority Based */
  /* PRIMARY SPACING - Generous padding for primary interaction zones */
  --spacing-primary-x: 1rem;    /* 16px horizontal padding */
  --spacing-primary-y: 0.75rem; /* 12px vertical padding */
  --spacing-primary-gap: 0.75rem; /* 12px gaps between primary elements */
  
  /* SECONDARY SPACING - Balanced padding for navigation zones */
  --spacing-secondary-x: 0.5rem;   /* 8px horizontal padding */
  --spacing-secondary-y: 0.375rem; /* 6px vertical padding */
  --spacing-secondary-gap: 0.375rem; /* 6px gaps between secondary elements */
  
  /* TERTIARY SPACING - Compact padding for background content */
  --spacing-tertiary-x: 0.375rem;  /* 6px horizontal padding */
  --spacing-tertiary-y: 0.25rem;   /* 4px vertical padding */
  --spacing-tertiary-gap: 0.25rem; /* 4px gaps for efficient scanning */
  
  /* UTILITY SPACING - Minimal padding for utility elements */
  --spacing-utility-x: 0.375rem;  /* 6px horizontal padding */
  --spacing-utility-y: 0.25rem;   /* 4px vertical padding */
  --spacing-utility-gap: 0.125rem; /* 2px gaps for subtle presence */
  
  /* Claude Color System - Blue-Accented Dark Theme */
  --dark-charcoal: #242424;      /* Main background - darkened */
  --medium-dark: #303030;        /* Sidebar & input containers - darkened */
  --user-message-bg: #1a1a1a;    /* User message background - darker than main bg but not pure black */
  --primary-blue: #5b9fc4;       /* Accents & buttons */
  --neutral-stone: #a5adb4;      /* Secondary text */
  --soft-off-white: #f0f3f5;     /* Primary text */
  --pure-white: #ffffff;         /* Highlights */

  /* Text System - Claude Approach with Attention Levels */
  --color-text-primary: var(--soft-off-white);    /* PRIMARY attention */
  --color-text-secondary: var(--neutral-stone);   /* SECONDARY attention */
  --color-text-tertiary: #8b9297;                 /* TERTIARY attention - slightly muted stone */
  --color-text-utility: #6b7280;                  /* UTILITY attention - more muted */

  /* Core Theme Colors - Claude Style */
  --color-background: var(--dark-charcoal);
  --color-foreground: var(--soft-off-white);
  --color-card: var(--medium-dark);
  --color-card-foreground: var(--soft-off-white);
  --color-popover: var(--medium-dark);
  --color-popover-foreground: var(--soft-off-white);
  --color-primary: var(--primary-blue);
  --color-primary-foreground: var(--pure-white);
  --color-secondary: var(--medium-dark);
  --color-secondary-foreground: var(--soft-off-white);
  --color-muted: var(--medium-dark);
  --color-muted-foreground: var(--neutral-stone);
  --color-accent: var(--user-message-bg);
  --color-accent-foreground: var(--soft-off-white);
  --color-destructive: #ef4444;
  --color-destructive-foreground: var(--pure-white);
  --color-border: #4a4a4a;                        /* Slightly lighter than medium-dark */
  --color-input: var(--medium-dark);
  --color-ring: var(--primary-blue);
  
  /* Sidebar Colors - Claude Style */
  --color-sidebar-background: var(--medium-dark);
  --color-sidebar-foreground: var(--soft-off-white);
  --color-sidebar-primary: var(--primary-blue);
  --color-sidebar-primary-foreground: var(--pure-white);
  --color-sidebar-accent: var(--medium-dark);
  --color-sidebar-accent-foreground: var(--soft-off-white);
  --color-sidebar-border: #4a4a4a;
  --color-sidebar-ring: var(--primary-blue);
  
  /* Blue Accent System */
  --color-accent-blue: var(--primary-blue);
  --color-accent-blue-foreground: var(--pure-white);
  --color-accent-blue-border: var(--primary-blue);
  
  /* Primary Blue Button - Updated for Claude */
  --color-blue-primary: var(--primary-blue);
  --color-blue-primary-foreground: var(--pure-white);
  --color-blue-primary-hover: #4a8cb0;             /* Slightly darker blue */
  
  /* Claude Transition System */
  --claude-sidebar-transition: width 300ms ease-in-out;
  --claude-opacity-transition: opacity 150ms ease-in-out;
  --claude-opacity-delay: 150ms;
  
  /* Radius */
  --radius: 0.5rem;
}


@layer base {

  /* Global layout setup */
  html, body, #root {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }
  
  /* Hide scrollbars but preserve scroll functionality */
  body::-webkit-scrollbar {
    display: none;
  }
  
  body {
    -ms-overflow-style: none;
    scrollbar-width: none;
    font-family: var(--default-font-family);
    /* Remove forced typography - let components control their own sizing */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--color-background);
    color: var(--color-foreground);
  }
  
  * {
    border-color: var(--color-border);
  }
  
  /* Ensure all text elements inherit consistent sizing */
  p, span, div {
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
  }
  
  /* Typography hierarchy with professional standards */
  h1 { 
    font-size: 20px;        /* text-xl */
    font-weight: 600;       /* font-semibold */
    line-height: 1.3;
    color: var(--color-foreground);
  }
  
  h2, h3 { 
    font-size: 18px;        /* text-lg */
    font-weight: 600;       /* font-semibold */
    line-height: 1.4;
    color: var(--color-foreground);
  }
  
  h4, h5, h6 { 
    font-size: 14px;        /* text-sm */
    font-weight: 600;       /* font-semibold */
    line-height: 1.5;
    color: var(--color-foreground);
  }
  
  /* Remove global interactive element overrides - let components control their typography */
  
  label {
    font-size: 14px;        /* text-sm standard */
    font-weight: 500;       /* font-medium consistency */
    color: var(--color-foreground);
  }
  
  /* Meta text standardization */
  small {
    font-size: 12px;        /* text-xs */
    font-weight: 500;       /* font-medium consistency */
    line-height: 1.4;
    color: var(--color-muted-foreground);
  }
}

@layer utilities {
  /* Scrollbar utilities */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Dark theme scrollbars for sidebar */
  .scrollbar-dark::-webkit-scrollbar {
    width: 6px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-track {
    background: var(--color-muted);
    border-radius: 3px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-thumb:hover {
    background: var(--color-accent);
  }
  
  .scrollbar-dark {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) var(--color-muted);
  }

  /* Collapsible Sidebar transitions */
  .sidebar-transition {
    transition: width 0.3s ease-in-out, transform 0.3s ease-in-out;
  }
  
  /* Smooth hover effects for sidebar items */
  .sidebar-item {
    transition: all 0.2s ease;
  }
  
  .sidebar-item:hover {
    transform: translateX(2px);
  }

  /* Border Radius Design System Utilities */
  .rounded-design-sm { border-radius: var(--radius-sm); }
  .rounded-design-md { border-radius: var(--radius-md); }
  .rounded-design-lg { border-radius: var(--radius-lg); }
  .rounded-design-xl { border-radius: var(--radius-xl); }

  /* UX-Driven Attention Typography Utilities - Now with HSL Colors */
  .text-primary { 
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    color: var(--color-text-primary);
  }
  .text-secondary { 
    font-size: var(--font-secondary-size);
    font-weight: var(--font-secondary-weight);
    line-height: var(--font-secondary-line-height);
    color: var(--color-text-secondary);
  }
  .text-tertiary { 
    font-size: var(--font-tertiary-size);
    font-weight: var(--font-tertiary-weight);
    line-height: var(--font-tertiary-line-height);
    color: var(--color-text-tertiary);
  }
  .text-utility { 
    font-size: var(--font-utility-size);
    font-weight: var(--font-utility-weight);
    line-height: var(--font-utility-line-height);
    color: var(--color-text-utility);
  }

  /* UX-Driven Spacing Utilities */
  .padding-primary { padding: var(--spacing-primary-y) var(--spacing-primary-x); }
  .padding-secondary { padding: var(--spacing-secondary-y) var(--spacing-secondary-x); }
  .padding-tertiary { padding: var(--spacing-tertiary-y) var(--spacing-tertiary-x); }
  .padding-utility { padding: var(--spacing-utility-y) var(--spacing-utility-x); }
  
  .gap-primary { gap: var(--spacing-primary-gap); }
  .gap-secondary { gap: var(--spacing-secondary-gap); }
  .gap-tertiary { gap: var(--spacing-tertiary-gap); }
  .gap-utility { gap: var(--spacing-utility-gap); }

  /* Chat position animation */
  .chat-transition { transition: var(--chat-position-transition); }
  
  /* Empty chat state - center the form vertically and horizontally */
  .chat-empty {
    justify-content: center; /* Center form vertically in flex column */
    align-items: center;     /* Center form horizontally */
  }
  
  /* Simplified form positioning - clean slide-down animation */
  .form-centered {
    /* Form starts in centered position naturally via parent .chat-empty */
    position: static;
    transform: none; /* No initial transform needed - centering handled by flexbox */
    transition: none; /* No initial transitions to prevent sliding from left */
  }
  
  .form-slide-down {
    /* Slide down to normal bottom position after first message */
    position: static;
    transform: translateY(20vh); /* Move down to simulate sliding to bottom */
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth slide-down */
  }
  
  /* Ensure no unwanted animations after slide-down completes */
  .form-started {
    transition: none !important;
    position: static !important;
    /* Remove transform override to allow slide-down animation */
  }
}

/* Essential component utilities */
@layer components {
  /* ChatGPT Clone Architecture - Chat Page */
  .chat-page {
    height: 100%; /* Simple inheritance like ChatGPT clone */
    width: 100%; /* Take full width of main container */
    display: flex;
    flex-direction: column;
    position: relative;
  }
  
  .wrapper {
    flex: 1;
    overflow-y: auto; /* Only vertical scrolling when needed */
    overflow-x: hidden; /* No horizontal scrolling */
    width: 100%;
    display: flex;
    justify-content: center; /* Centers .chat horizontally */
  }
  
  .chat {
    /* Removed fixed width - using Tailwind utilities in Chat.tsx instead */
    max-width: 800px; /* Constrain maximum width */
    height: 100%; /* Take full wrapper height */
    display: flex;
    flex-direction: column;
    gap: 0.25rem; /* 4px extremely tight spacing between user-AI pairs */
    justify-content: flex-start; /* Natural top-to-bottom flow for proper scroll positioning */
    /* DEBUG: Disable transitions temporarily */
    transition: none !important;
  }
  
  /* Debug state for chat that has started */
  .chat-has-started {
    /* Ensure no sliding animations after chat starts */
    transform: none !important;
    transition: none !important;
  }
  
  /* Message styling - vertical stacking with dynamic sizing */
  .message {
    /* No fixed width - allows natural sizing like ChatGPT clone */
    padding: 1rem;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    color: var(--color-text-primary);
  }
  
  .message.user {
    background-color: var(--color-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
    font-size: calc(var(--font-primary-size) * 1.1);
    font-weight: var(--font-secondary-weight);
    /* Removed max-width - using Tailwind utilities in components instead */
    align-self: flex-start; /* Left-align user messages */
    margin-top: 1.5rem; /* Extra space before every user message, including first */
  }
  
  .message.assistant {
    /* Clean text presentation, no background */
    background: transparent;
    border: none;
    padding: 1rem 0;
    font-size: calc(var(--font-primary-size) * 1.1);
    font-weight: var(--font-secondary-weight);
    /* Removed max-width - using Tailwind utilities in components instead */
    align-self: flex-start; /* Left-align assistant messages */
  }
  
  /* Form styling - part of scrollable content */
  .new-form {
    margin-top: 1rem;
    width: 100%;
    max-width: 100%; /* Prevent width overflow */
    margin-bottom: 2rem; /* Creates space below form, moving it away from bottom */
    /* DEBUG: Disable transitions that might cause sliding */
    transition: none !important;
  }
  
  .form-container {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%;
    gap: var(--spacing-primary-gap);
    background-color: var(--color-muted);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-input);
    padding: 0.75rem; /* Reduced padding for smaller height */
    min-height: 3rem; /* Reduced minimum height */
  }
  
  .form-textarea {
    resize: none;
    width: 100%;
    min-height: 2rem; /* Reduced textarea height */
    background: transparent;
    border: 0;
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    color: var(--color-text-primary);
  }
  
  .form-textarea::placeholder {
    color: var(--color-muted-foreground);
  }
  
  .form-textarea:focus {
    outline: none;
  }
  
  .form-textarea:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
  
  .form-submit-button {
    align-self: flex-end;
    border-radius: var(--radius-md);
    background-color: var(--color-blue-primary);
    color: var(--color-blue-primary-foreground);
    border: 1px solid var(--color-blue-primary);
    transition: all 0.2s ease;
  }
  
  .form-submit-button:hover:not(:disabled) {
    background-color: var(--color-blue-primary-hover);
    border-color: var(--color-blue-primary-hover);
  }
  
  .form-submit-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Custom account blue components - preserved for branding */
  .account-blue {
    background-color: var(--color-accent-blue-foreground);
  }
  
  .account-blue-text {
    color: var(--color-accent-blue-foreground);
  }
  
  .account-blue-border {
    border-color: var(--color-accent-blue-border);
  }
  


  /* Typing indicator animation */
  @keyframes typing-dot-bounce {
    0%, 40% { transform: translateY(0); }
    20% { transform: translateY(-0.25rem); }
  }
  
  .animate-typing-dot-bounce {
    animation: typing-dot-bounce 1.25s ease-out infinite;
  }
  
  /* Consistent button styling matching chat input */
  .btn-blue-primary {
    background-color: var(--medium-dark) !important;
    color: var(--soft-off-white) !important;
    border-color: var(--medium-dark) !important;
  }
  
  .btn-blue-primary:hover {
    background-color: var(--user-message-bg) !important;
    border-color: var(--medium-dark) !important;
  }
  
  .btn-blue-primary:disabled {
    background-color: var(--medium-dark) !important;
    opacity: 0.5;
  }

  /* User Message Bubble System - For left-aligned avatar layout */
  .message-bubble-user {
    background-color: var(--user-message-bg);
    color: var(--color-text-primary);
    border-radius: 10px;
    padding: 0.75rem 1rem;
    word-wrap: break-word;
    hyphens: auto;
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    white-space: pre-wrap;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  /* Mobile Responsive User Bubbles */
  @media (max-width: 768px) {
    .message-bubble-user {
      padding: 0.625rem 0.75rem;
      font-size: 14px;
    }
  }
  
  /* Markdown typography (aligned with eesy-chat, adapted to theme) */
  .markdown h1 { margin-bottom: 1rem; font-size: 1.875rem; font-weight: 700; }
  .markdown h2 { margin-bottom: 1rem; font-size: 1.5rem; font-weight: 700; }
  .markdown h3,
  .markdown h4,
  .markdown h5,
  .markdown h6 { margin-bottom: 1rem; font-weight: 700; }
  .markdown p { margin-bottom: 1rem; }
  .markdown ul { margin-bottom: 1rem; margin-left: 2rem; list-style: disc outside; }
  .markdown ol { margin-bottom: 1rem; margin-left: 2rem; list-style: decimal outside; }
  .markdown li { margin-bottom: 0.5rem; }
  .markdown hr { margin-top: 2rem; margin-bottom: 2rem; border-color: var(--color-border); }
  .markdown a { text-decoration: underline; text-underline-offset: 0.2rem; }
  .markdown table { width: 100%; border-collapse: collapse; }
  .markdown th,
  .markdown td { padding: 0.5rem 1rem; text-align: left; font-size: 0.875rem; border-color: var(--color-border); }
  .markdown tr { border-bottom: 1px solid var(--color-border); }
  .markdown tr:last-child { border-bottom: 0; }
  .markdown code:not(pre code) { border-radius: 0.375rem; background: color-mix(in oklab, var(--color-muted) 90%, transparent); padding: 0.125rem 0.25rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 0.75rem; }

}