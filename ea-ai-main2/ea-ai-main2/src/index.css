@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme {
  --default-transition: all 0.2s ease;
  --chat-position-transition: all 0.5s ease-in-out;
  --default-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  
  /* UX-Driven Typography System - Attention Flow Based */
  /* PRIMARY ATTENTION ZONE - Active interaction areas (chat input, main actions) */
  --font-primary-size: 14px;
  --font-primary-weight: 500;
  --font-primary-line-height: 1.5;
  
  /* SECONDARY ATTENTION ZONE - Navigation and important controls */
  --font-secondary-size: 13px;
  --font-secondary-weight: 475;
  --font-secondary-line-height: 1.45;
  
  /* TERTIARY ATTENTION ZONE - Background content, scannable lists */
  --font-tertiary-size: 12px;
  --font-tertiary-weight: 400;
  --font-tertiary-line-height: 1.4;
  
  /* UTILITY ATTENTION ZONE - Minimal UI elements, three dots, meta info */
  --font-utility-size: 11px;
  --font-utility-weight: 350;
  --font-utility-line-height: 1.35;
  
  /* LEGACY SCALE - Maintained for headings and special use */
  --font-size-lg: 18px;       /* Section headings */
  --line-height-lg: 1.4;
  --font-weight-lg: 600;
  
  --font-size-xl: 20px;       /* Page headings */
  --line-height-xl: 1.3;
  --font-weight-xl: 600;
  
  --font-size-2xl: 24px;      /* Large headings */
  --line-height-2xl: 1.2;
  --font-weight-2xl: 600;
  
  --font-size-3xl: 30px;      /* Hero text */
  --line-height-3xl: 1.2;
  --font-weight-3xl: 600;

  /* Border Radius Design System - Professional Curvature */
  --radius-sm: 0.375rem;     /* 6px - small elements like badges */
  --radius-md: 0.5rem;       /* 8px - default buttons and inputs */  
  --radius-lg: 0.75rem;      /* 12px - large containers like chat input */
  --radius-xl: 1rem;         /* 16px - special cases like modals */
  
  /* UX-Driven Spacing System - Attention Priority Based */
  /* PRIMARY SPACING - Generous padding for primary interaction zones */
  --spacing-primary-x: 1rem;    /* 16px horizontal padding */
  --spacing-primary-y: 0.75rem; /* 12px vertical padding */
  --spacing-primary-gap: 0.75rem; /* 12px gaps between primary elements */
  
  /* SECONDARY SPACING - Balanced padding for navigation zones */
  --spacing-secondary-x: 0.5rem;   /* 8px horizontal padding */
  --spacing-secondary-y: 0.375rem; /* 6px vertical padding */
  --spacing-secondary-gap: 0.375rem; /* 6px gaps between secondary elements */
  
  /* TERTIARY SPACING - Compact padding for background content */
  --spacing-tertiary-x: 0.375rem;  /* 6px horizontal padding */
  --spacing-tertiary-y: 0.25rem;   /* 4px vertical padding */
  --spacing-tertiary-gap: 0.25rem; /* 4px gaps for efficient scanning */
  
  /* UTILITY SPACING - Minimal padding for utility elements */
  --spacing-utility-x: 0.375rem;  /* 6px horizontal padding */
  --spacing-utility-y: 0.25rem;   /* 4px vertical padding */
  --spacing-utility-gap: 0.125rem; /* 2px gaps for subtle presence */
  
  /* HSL White Intensity Text System - Attention Based */
  --color-text-primary: hsl(0, 0%, 100%);     /* PRIMARY attention - Pure white */
  --color-text-secondary: hsl(0, 0%, 90%);    /* SECONDARY attention - 90% white */
  --color-text-tertiary: hsl(0, 0%, 75%);     /* TERTIARY attention - 75% white */
  --color-text-utility: hsl(0, 0%, 60%);      /* UTILITY attention - 60% white */

  /* Colors - ChatGPT Grey Theme (Legacy) */
  --color-background: #212121;
  --color-foreground: hsl(0, 0%, 100%);       /* Uses primary white */
  --color-card: #2f2f2f;
  --color-card-foreground: hsl(0, 0%, 100%);
  --color-popover: #2f2f2f;
  --color-popover-foreground: hsl(0, 0%, 100%);
  --color-primary: #404040;
  --color-primary-foreground: hsl(0, 0%, 100%);
  --color-secondary: #1a1a1a;
  --color-secondary-foreground: hsl(0, 0%, 100%);
  --color-muted: #353535;
  --color-muted-foreground: hsl(0, 0%, 75%);   /* Uses tertiary intensity */
  --color-accent: #353535;
  --color-accent-foreground: hsl(0, 0%, 100%);
  --color-destructive: #ef4444;
  --color-destructive-foreground: hsl(0, 0%, 100%);
  --color-border: #404040;
  --color-input: #353535;
  --color-ring: #404040;
  
  /* Custom colors - updated for grey theme */
  --color-sidebar-background: #1a1a1a;
  --color-sidebar-foreground: #ffffff;
  --color-sidebar-primary: #404040;
  --color-sidebar-primary-foreground: #ffffff;
  --color-sidebar-accent: #353535;
  --color-sidebar-accent-foreground: #ffffff;
  --color-sidebar-border: #404040;
  --color-sidebar-ring: #404040;
  
  --color-accent-blue: #1e3a8a;
  --color-accent-blue-foreground: #60a5fa;
  --color-accent-blue-border: #1e40af;
  
  /* Primary Blue Button - Chat Submit Button */
  --color-blue-primary: #60a5fa;        /* Nice blue background */
  --color-blue-primary-foreground: #ffffff;  /* White text/icons */
  --color-blue-primary-hover: #3b82f6;  /* Slightly darker blue on hover */
  
  /* Radius */
  --radius: 0.5rem;
}


@layer base {

  /* Global layout setup */
  html, body, #root {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }
  
  /* Hide scrollbars but preserve scroll functionality */
  body::-webkit-scrollbar {
    display: none;
  }
  
  body {
    -ms-overflow-style: none;
    scrollbar-width: none;
    font-family: var(--default-font-family);
    /* Remove forced typography - let components control their own sizing */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--color-background);
    color: var(--color-foreground);
  }
  
  * {
    border-color: var(--color-border);
  }
  
  /* Ensure all text elements inherit consistent sizing */
  p, span, div {
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
  }
  
  /* Typography hierarchy with professional standards */
  h1 { 
    font-size: 20px;        /* text-xl */
    font-weight: 600;       /* font-semibold */
    line-height: 1.3;
    color: var(--color-foreground);
  }
  
  h2, h3 { 
    font-size: 18px;        /* text-lg */
    font-weight: 600;       /* font-semibold */
    line-height: 1.4;
    color: var(--color-foreground);
  }
  
  h4, h5, h6 { 
    font-size: 14px;        /* text-sm */
    font-weight: 600;       /* font-semibold */
    line-height: 1.5;
    color: var(--color-foreground);
  }
  
  /* Remove global interactive element overrides - let components control their typography */
  
  label {
    font-size: 14px;        /* text-sm standard */
    font-weight: 500;       /* font-medium consistency */
    color: var(--color-foreground);
  }
  
  /* Meta text standardization */
  small {
    font-size: 12px;        /* text-xs */
    font-weight: 500;       /* font-medium consistency */
    line-height: 1.4;
    color: var(--color-muted-foreground);
  }
}

@layer utilities {
  /* Scrollbar utilities */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Dark theme scrollbars for sidebar */
  .scrollbar-dark::-webkit-scrollbar {
    width: 6px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-track {
    background: var(--color-muted);
    border-radius: 3px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
  }
  
  .scrollbar-dark::-webkit-scrollbar-thumb:hover {
    background: var(--color-accent);
  }
  
  .scrollbar-dark {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) var(--color-muted);
  }

  /* Collapsible Sidebar transitions */
  .sidebar-transition {
    transition: width 0.3s ease-in-out, transform 0.3s ease-in-out;
  }
  
  /* Smooth hover effects for sidebar items */
  .sidebar-item {
    transition: all 0.2s ease;
  }
  
  .sidebar-item:hover {
    transform: translateX(2px);
  }

  /* Border Radius Design System Utilities */
  .rounded-design-sm { border-radius: var(--radius-sm); }
  .rounded-design-md { border-radius: var(--radius-md); }
  .rounded-design-lg { border-radius: var(--radius-lg); }
  .rounded-design-xl { border-radius: var(--radius-xl); }

  /* UX-Driven Attention Typography Utilities - Now with HSL Colors */
  .text-primary { 
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    color: var(--color-text-primary);
  }
  .text-secondary { 
    font-size: var(--font-secondary-size);
    font-weight: var(--font-secondary-weight);
    line-height: var(--font-secondary-line-height);
    color: var(--color-text-secondary);
  }
  .text-tertiary { 
    font-size: var(--font-tertiary-size);
    font-weight: var(--font-tertiary-weight);
    line-height: var(--font-tertiary-line-height);
    color: var(--color-text-tertiary);
  }
  .text-utility { 
    font-size: var(--font-utility-size);
    font-weight: var(--font-utility-weight);
    line-height: var(--font-utility-line-height);
    color: var(--color-text-utility);
  }

  /* UX-Driven Spacing Utilities */
  .padding-primary { padding: var(--spacing-primary-y) var(--spacing-primary-x); }
  .padding-secondary { padding: var(--spacing-secondary-y) var(--spacing-secondary-x); }
  .padding-tertiary { padding: var(--spacing-tertiary-y) var(--spacing-tertiary-x); }
  .padding-utility { padding: var(--spacing-utility-y) var(--spacing-utility-x); }
  
  .gap-primary { gap: var(--spacing-primary-gap); }
  .gap-secondary { gap: var(--spacing-secondary-gap); }
  .gap-tertiary { gap: var(--spacing-tertiary-gap); }
  .gap-utility { gap: var(--spacing-utility-gap); }

  /* Chat position animation */
  .chat-transition { transition: var(--chat-position-transition); }
  
  /* Empty chat state - center the form vertically and horizontally */
  .chat-empty {
    justify-content: center; /* Center form vertically in flex column */
    align-items: center;     /* Center form horizontally */
  }
  
  /* Simplified form positioning - clean slide-down animation */
  .form-centered {
    /* Form starts in centered position naturally via parent .chat-empty */
    position: static;
    transform: none; /* No initial transform needed - centering handled by flexbox */
    transition: none; /* No initial transitions to prevent sliding from left */
  }
  
  .form-slide-down {
    /* Slide down to normal bottom position after first message */
    position: static;
    transform: translateY(20vh); /* Move down to simulate sliding to bottom */
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth slide-down */
  }
  
  /* Ensure no unwanted animations after slide-down completes */
  .form-started {
    transition: none !important;
    position: static !important;
    /* Remove transform override to allow slide-down animation */
  }
}

/* Essential component utilities */
@layer components {
  /* ChatGPT Clone Architecture - Chat Page */
  .chat-page {
    height: 100%; /* Simple inheritance like ChatGPT clone */
    width: 100%; /* Take full width of main container */
    display: flex;
    flex-direction: column;
    position: relative;
  }
  
  .wrapper {
    flex: 1;
    overflow-y: auto; /* Only vertical scrolling when needed */
    overflow-x: hidden; /* No horizontal scrolling */
    width: 100%;
    display: flex;
    justify-content: center; /* Centers .chat horizontally */
  }
  
  .chat {
    width: 75%; /* Widened chat content area for better readability */
    max-width: 800px; /* Constrain maximum width */
    height: 100%; /* Take full wrapper height */
    display: flex;
    flex-direction: column;
    gap: 0.25rem; /* 4px extremely tight spacing between user-AI pairs */
    justify-content: flex-start; /* Natural top-to-bottom flow for proper scroll positioning */
    /* DEBUG: Disable transitions temporarily */
    transition: none !important;
  }
  
  /* Debug state for chat that has started */
  .chat-has-started {
    /* Ensure no sliding animations after chat starts */
    transform: none !important;
    transition: none !important;
  }
  
  /* Message styling - vertical stacking with dynamic sizing */
  .message {
    /* No fixed width - allows natural sizing like ChatGPT clone */
    padding: 1rem;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    color: var(--color-text-primary);
  }
  
  .message.user {
    background-color: var(--color-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
    max-width: 79%; /* Adjusted to 79% */
    align-self: flex-start; /* Left-align user messages */
    margin-top: 1.5rem; /* Extra space before every user message, including first */
  }
  
  .message.assistant {
    /* Clean text presentation, no background */
    background: transparent;
    border: none;
    padding: 1rem 0;
    max-width: 79%; /* Adjusted to 79% */
    align-self: flex-start; /* Left-align assistant messages */
  }
  
  /* Form styling - part of scrollable content */
  .new-form {
    margin-top: 1rem;
    width: 100%;
    max-width: 100%; /* Prevent width overflow */
    margin-bottom: 2rem; /* Creates space below form, moving it away from bottom */
    /* DEBUG: Disable transitions that might cause sliding */
    transition: none !important;
  }
  
  .form-container {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%;
    gap: var(--spacing-primary-gap);
    background-color: var(--color-muted);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-input);
    padding: 0.75rem; /* Reduced padding for smaller height */
    min-height: 3rem; /* Reduced minimum height */
  }
  
  .form-textarea {
    resize: none;
    width: 100%;
    min-height: 2rem; /* Reduced textarea height */
    background: transparent;
    border: 0;
    font-size: var(--font-primary-size);
    font-weight: var(--font-primary-weight);
    line-height: var(--font-primary-line-height);
    color: var(--color-text-primary);
  }
  
  .form-textarea::placeholder {
    color: var(--color-muted-foreground);
  }
  
  .form-textarea:focus {
    outline: none;
  }
  
  .form-textarea:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
  
  .form-submit-button {
    align-self: flex-end;
    border-radius: var(--radius-md);
    background-color: var(--color-blue-primary);
    color: var(--color-blue-primary-foreground);
    border: 1px solid var(--color-blue-primary);
    transition: all 0.2s ease;
  }
  
  .form-submit-button:hover:not(:disabled) {
    background-color: var(--color-blue-primary-hover);
    border-color: var(--color-blue-primary-hover);
  }
  
  .form-submit-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Custom account blue components - preserved for branding */
  .account-blue {
    background-color: var(--color-accent-blue-foreground);
  }
  
  .account-blue-text {
    color: var(--color-accent-blue-foreground);
  }
  
  .account-blue-border {
    border-color: var(--color-accent-blue-border);
  }
  
  /* Typing indicator animation */
  @keyframes typing-dot-bounce {
    0%, 40% { transform: translateY(0); }
    20% { transform: translateY(-0.25rem); }
  }
  
  .animate-typing-dot-bounce {
    animation: typing-dot-bounce 1.25s ease-out infinite;
  }
  
  /* Blue primary button for chat submit - force override */
  .btn-blue-primary {
    background-color: var(--color-blue-primary) !important;
    color: var(--color-blue-primary-foreground) !important;
    border-color: var(--color-blue-primary) !important;
  }
  
  .btn-blue-primary:hover {
    background-color: var(--color-blue-primary-hover) !important;
    border-color: var(--color-blue-primary-hover) !important;
  }
  
  .btn-blue-primary:disabled {
    background-color: var(--color-blue-primary) !important;
    opacity: 0.5;
  }
}