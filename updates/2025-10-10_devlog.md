## Google Calendar: Clerk-only connect/disconnect hardening + Settings flicker fix (08:05)

**Status**: ✅ One-time consent kept; true disconnect enforced; Settings no longer flickers

### Context
Users saw: 1) Settings briefly showed "Connect" before flipping to "Disconnect"; 2) After disconnect, AI could still access Google Calendar.

### Changes Made
- ea-ai-main2/ea-ai-main2/src/views/SettingsView.tsx
  - Drive UI state from query: `useQuery(api.googleCalendar.tokens.getGoogleCalendarEnabled)`; render loading state to eliminate flicker
  - Switch `setGoogleCalendarEnabled` to `useMutation` (correct hook)
  - Disconnect flow: client `extAcc.destroy()` + server fallback to force-delete Clerk external account; keep legacy token revoke call
- ea-ai-main2/ea-ai-main2/convex/googleCalendar/auth.ts
  - Add `revokeLegacyGoogleToken` action (Google revoke endpoint + DB delete)
  - Add `forceDestroyGoogleExternalAccount` (Clerk Backend API delete external account)
  - Add enabled-flag guard at start of all Calendar actions (list/create/settings/time): block when disabled

### Result
- No initial button flicker; Settings shows correct Connect/Disconnect after brief load
- Disconnect fully removes access: AI/tool calls now fail fast with "Google Calendar disabled" until user reconnects
- Next connect behaves like fresh consent (external account removed + no legacy token)

## Task breakdown subagent + primary prompt updates (11:30)

**Status**: ✅ Added no-tools task_breakdown subagent; primary prompt guides add-to-Todoist or adjust detail

### Changes Made
- ea-ai-main2/ea-ai-main2/convex/ai/prompts/task_breakdown.ts: New system prompt defining Levels 1–3, no tools, single structured output
- ea-ai-main2/ea-ai-main2/convex/ai/subagents/registry.ts: Registered built-in subagent `task_breakdown` (tools: {}) with temperature 0.3
- ea-ai-main2/ea-ai-main2/convex/ai/prompts/promptLoader.ts: Registered `task_breakdown` prompt in PROMPT_REGISTRY
- ea-ai-main2/ea-ai-main2/convex/ai/prompts/zen_new.ts:
  - Added "Task Breakdown Subagent (task)" usage block (levels, isolation, adjustment)
  - Added "After Task Breakdown Results" guidance to either add to Todoist (delegate to execution) or adjust detail level
  - Added lightweight overview cue to optionally surface 1–3 likely-important/forgotten tasks by age

### Result
- Primary agent can delegate breakdown requests cleanly, then offer: add items to Todoist via execution subagent or re-run with different detail level
- Maintains separation from planning; task_breakdown is an isolated, no-tools feature returning a single formatted result


