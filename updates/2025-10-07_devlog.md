 
## Chat markdown rendering + hardened markdown origin requirement (11:45)

**Status**: ✅ Markdown now renders in assistant messages; hardened renderer error resolved

Context: Assistant outputs (e.g., `**bold**`) showed as plain text because the chat UI rendered strings directly. After switching to the hardened markdown component, runtime error appeared: "defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided".

Changes Made
- ea-ai-main2/ea-ai-main2/src/components/chat/ConversationTurn.tsx:4,157-160
  - Import `Response`; render AI message via `<Response>` inside `.markdown`.
- ea-ai-main2/ea-ai-main2/src/components/chat/AssistantMessage.tsx:4,39-40
  - Import `Response`; render `content` via `<Response>` inside `.markdown`.
- ea-ai-main2/ea-ai-main2/src/components/chat/RenderMessage.tsx:1,49-50
  - Import `Response`; render assistant branch with `<Response>` inside `.markdown`.
- ea-ai-main2/ea-ai-main2/src/components/ai-elements/response.tsx:343-361
  - Provide `defaultOrigin` (window.location.origin or `http://localhost`) to satisfy hardened-react-markdown when `allowedLinkPrefixes` is set.
- ea-ai-main2/ea-ai-main2/src/index.css:529-546
  - Added `.markdown` typography (headings, lists, lists spacing, inline code, tables, hr, links) to match eesy-chat’s readable font handling within our theme.

Result
- Assistant markdown (bold, lists, links, inline code) renders correctly across chat and reasoning content.
- The hardened-react-markdown `defaultOrigin` runtime error is eliminated; link/image prefix restrictions remain enforced.

## Chat UX: immediate rows, smooth streaming, no extra newlines (15:25)

**Status**: ✅ First message shows instantly; assistant typing appears immediately; streaming is smooth; no spurious newlines

Context: Blank first turn, delayed typing indicator, extra blank lines, and flicker during streaming/finish compared with eesy-chat.

Changes Made
- ea-ai-main2/ea-ai-main2/src/components/chat/Chat.tsx
  - Switched to separate user/assistant rows; removed fallback thinking row; tightened vertical spacing; trimStart user text; kept use-auto-scroll.
- ea-ai-main2/ea-ai-main2/src/components/chat/AssistantMessage.tsx
  - Streaming vs final crossfade in a single stacked container; trimStart content; streaming uses whitespace-normal + typing dots; copy visible only when not streaming.
- ea-ai-main2/ea-ai-main2/src/context/chat.tsx
  - Disabled reload() on finish to avoid flicker; throttled streaming updates (~60ms) and sanitized chunk text; preserved optimistic state during hydration.
- ea-ai-main2/ea-ai-main2/src/components/chat/ChatInput.tsx, ConversationTurn.tsx
  - Removed noisy debug logs; minor class fixes (scrollbar-hide).
- ea-ai-main2/ea-ai-main2/src/index.css
  - Kept mask/scrollbar fixes; ensured stable layout.

Result
- User message renders immediately without extra blank line; assistant typing shows right away.
- Streamed text grows smoothly and wraps only at container edge; final markdown fades in without flicker.